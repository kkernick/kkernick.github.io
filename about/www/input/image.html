<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
		<style>
			td {padding:0.5em;}
			.opt {
				text-align: center;
			}		

			.desc {
				text-align: left;
				width: 50%;
			}

			.desc_table {
				text-align: left;
				width: 70%;
			}
		</style>
    </head>  
    <body>
		<div class = "well">
		
			<h4>Accepted File Formats</h4>
			
			<ul>
			<li>For the background image, Heatmapper accepts:
			<ul>
				<li>A JPEG image with extension <em>.jpg</em> or .<em>jpeg</em></li>
				<li>A PNG image with extension <em>.png</em></li>
				<li>A TIFF image with extension <em>.tif</em> or .<em>tiff</em></li>
			</ul>
			</li>
			
			<li>For the overlaid grid data, Heatmapper accepts:
			<ul>
				<li>Comma-Separated Value with extension <em>.csv</em></li>
				<li>Tab separated with extensions <em>.txt</em>, <em>.dat</em>, <em>.tsv</em>, or <em>.tab</em></li>
				<li>First sheet of an Excel workbook with extension <em>.xls</em> or <em>.xlsx</em></li>
			</ul>
			</li>
			</ul>
			
			<br />
			
			<h4>Data Structure</h4>
			There are two acceptable formats for the grid data, long-format or wide-format: 
			<br /><br />
			
			<em>Long-Format:</em>
			<br />
			
			<ul>
				<li>Specifies grid or "temperature" values by <i>x</i> and <i>y</i> coordinate. Each combination of <i>x</i> and <i>y</i> coordinates must be in the data set.</li>
				<li>Must contain header row with columns "x", "y", and "value".</li>
			</ul>
			
			<em>Wide-Format:</em>
			
			<ul>
				<li>Includes only grid or "temperature" values, with implied <i>x</i> and <i>y</i> coordinates. Values are given as a matrix that is mapped onto the image.</li>
				<li>Must have no header row.</li>
			</ul>
			
			<br />
			
			<h4>Acceptable data values</h4>
			
			<ul>
				<li><i>x</i> and <i>y</i>: positive numbers ranging from 1 to the number of grid columns/rows.</li>
				<li><i>value</i>: any positive number.</li>
				<li>Input data can have up to 200 x and 200 y coordinates.</li>
			</ul>
			
			<br />
			
			<h4>Examples</h4>
			
			<h5>Long-format</h5>
			
			Download an example in long-format <a href="examples/image_example_long.txt" target="_blank">here</a>.
			<br /><br />
			
			Example layout:
			<br />
			
<code style="white-space: pre;">
value	x	y
7.0	1	1
7.0	1	2
17.8	1	3
17.8	2	1
19.5	2	2
15.7	2	3
5.0	3	1
13.5	3	2
5.2	3	3</code>

<br /><br />
or<br />

<code style="white-space: pre;">
x	y	value
1	1	7.0
1	2	7.0
1	3	17.8
2	1	17.8
2	2	19.5
2	3	15.7
3	1	5.0
3	2	13.5
3	3	5.2</code>

<h5>Wide-format</h5>

			Download an example in wide-format <a href="examples/image_example_wide.txt" target="_blank">here</a>.
			<br /><br />

			Example layout:
			<br />

<code style="white-space: pre;">
11.6	3.6	12.9	8.7
0.9	15.9	0.6	1.4
8.7	19.8	2.9	10.3
12.0	10.0	16.9	15.3
</code>

		</div>

<div>
<h5>An example of image overlay functionality: X-ray CT scan of a rat treated with polyethylene glycol (PEG)-protected gold nanorods to allow visualization of tumors</h5>
<p>Data from <a href="http://www.ncbi.nlm.nih.gov/pmc/articles/PMC2712876/">Maltzahn et al.</a> Example grid overlay: Temperature heat map example (artifical data, not taken from the paper).
</p>
<p>You may use the data files given above for this example.</p>
<br></br>
<p>Click on the <strong>Image Overlay</strong> tab on the main header and select the Upload File radio button for the <strong>Select Image File</strong> section, followed by the Choose File button (use the "long" example here). Alternatively, you may choose the 'Example File' radio button. Note: details about the example may be viewed by clicking the Information Icon.</p>
<p>Do the same for the <strong>Select Grid File</strong> section to view an overlay(use the "wide" example here). Alternatively, you may choose the 'Example File' radio button. The following image will display.</p>
<br></br>
<center><img src="images/HMI1.png" width="70%" height="70%"</body></img></center>
<br></br>

<p class="opt">The following menu shows the available options. Each option is reviewed below.</p>
<br></br>
<center><img src="images/HMI2.png" width="40%" height="40%"</body></img></center>
<br></br>

<center><img src="images/HMI3.png" width="50%" height="50%"</body></img>
<p class="desc"><strong>Show/Hide Layers:</strong> Add or remove heatmap layers to display or remove certain features of the heatmap, such as contour lines, axis labels, or the heatmap itself. For example, by choosing to display only the <strong>Heatmap</strong>, <strong>Grid Lines</strong>, and <strong>Axis Labels</strong>, the plot changes to this image to display the grid and the distribution on a readable graph.</p>
</center>
<br></br>

<center><img src="images/HMI4.png" width="50%" height="50%"</body></img>
<p class="desc"><strong>Display:</strong> Choose the distribution for the overlaying grid. The default is <strong>Gaussian</strong>, which smoothes the distribution, while the <strong>Square</strong> display does not (as shown in this image). For this example, the heatmap opacity has been changed to 30 (this option is explained below).</p>
</center>
<br></br>

<center><img src="images/HMI5.png" width="50%" height="50%"</body></img>
<p class="desc"><strong>Gaussian Radius Multiplier:</strong> Adjust the bandwidth for kernel density estimation. A higher value smoothes the graph further. For example, a value of 1.5 displays this distribution.</p>
</center>
<br></br>

<center><img src="images/HMI6.png" width="50%" height="50%"</body></img>
<p class="desc">Almost no smoothing occurs with a Gaussian Radius Multiplier value of 0.5, and individual data points are distinctly observed (for this example heatmap opacity was increased to 0.2).</p>
</center>
<br></br>

<center><img src="images/HMI7.png" width="50%" height="50%"</body></img>
<p class="desc"><strong>Contour Smoothness:</strong> Adjust the number of grid points in each direction for kernel density estimation. A high value of 400 would extensively smooth the kernel outlines, as seen in the image (for this example the 'Contour Lines' layer was selected to be shown).</p>
</center>
<br></br>

<center><img src="images/HMI8.png" width="50%" height="50%"</body></img>
<p class="desc">For a Contour Smoothness value of 25, only a minimal set of 25 points are used for density estimation and kernel outlining, which the result seen on the image (for this example the 'Contour Lines' layer was selected to be shown).</p>
</center>
<br></br>

<center><img src="images/HMI9.png" width="50%" height="50%"</body></img>
<p class="desc"><strong>Heatmap Opacity:</strong> Adjust the opacity of the grid overlay. A higher value would more clearly display the heatmap distribution. For example, increasing the opacity to 0.15, results in this image (compared to the initially uploaded image). A maximum opacity will display the grid distribution in solid colors, without the underlying image.</p>
</center>
<br></br>

<center><img src="images/HMI10.png" width="50%" height="50%"</body></img>
<p class="desc"><strong>Number of Shades:</strong> Adjust the number of colors used for the distribution. A lower value of 7, for example, would divide the distribution into fewer regions as seen in the image (for this example heatmapp opacity was set to 0.15). A higher value, however, would identify regions of transition in more detail.</p>
</center>
<br></br>

<center><img src="images/HMI11.png" width="50%" height="50%"</body></img>
<p class="desc"><strong>Color Scheme:</strong> Change the color progression scheme. The two options besides 'Custom' are 'Rainbow' and 'Topo'. The 'Custom' view uses the 'Low Color' and 'High Color' settings to create a gradient for the distribution. The <strong>Rainbow</strong> scheme does not use a color gradient, but instead assigns rainbow colors to different intensities, as shown in the image. This may be useful to better differentiate the areas of the distribution.</p>
</center>
<br></br>

<center><img src="images/HMI12.png" width="50%" height="50%"</body></img>
<p class="desc">Similarly, the <strong>Topo</strong> color scheme assigns a different color to each kernel, with lighter colors representing higher values.</p>
</center>
<br></br>

<center><img src="images/HMI13.png" width="50%" height="50%"</body></img>
<p class="desc">For the <strong>Custom</strong> color scheme, the user may change the colors of the gradient. For example, by clicking on the <strong>Low Color</strong> colored box and choosing a light blue value from the palette, this distribution is observed.</p>
</center>
<br></br>

<p>There are two Download options that may be used to download the image/data at any step during the experience. The <strong>Plot</strong> option will download the image as seen on the webpage. The <strong>Table</strong> option will download a text format of the data in table format, containing the positions and values for overlayed grid.</p>

<p class="opt">Further fine tuning may be performed with the <strong>Show Advanced Options</strong> tab. The three available options are described below.</p>
<br></br>

<center><img src="images/HMArrow.png" width="40%" height="40%"</body></img>
<p></p>
</center>

<center><img src="images/HMIAdvanced.png" width="40%" height="40%"</body></img>
</center>
<br></br>

<center><img src="images/HMI14.png" width="50%" height="50%"</body></img>
<p class="desc"><strong>Stretch Image to Fit Grid:</strong> The image is stretched to fill the available grid space on the plot (for this example, the 'Axis Labels' layer was selected to be shown).</p>
</center>
<br></br>

<center><img src="images/HMI15.png" width="50%" height="50%"</body></img>
<p class="desc"><strong>Plot Width:</strong> The width of the plot/grid is increased with a higher value (such as 900), to stretch the distribution on the grid as shown in the image.</p>
<p class="desc"><strong>Plot Height:</strong> Increasing the plot height would have a similar effect in the vertical direction.</p>
</center>
<br></br>


<center><img src="images/HMI16.png" width="70%" height="70%"</body></img>
<p class="desc_table">The user may also add a new point on the heatmap or change the value of an existing point using the <strong>Selected Point</strong> feature directly above the image. For exmaple, by entering the values for x=10, and y=20 and checking the <strong>Show</strong> option, the point is identified with a yellow square as shown in the image below. By changing the <strong>Value</strong> to 200, for example, the intensity of the point is changed along with the overall distribution, as shown below.</p>
</center>
<br></br>

<center><img src="images/HMI17.png" width="50%" height="50%"</body></img>
<p class="desc">Changing the value of a point on the heatmap, as described above.</p>
</center>
<br></br>

<center><img src="images/HMI18.png" width="70%" height="70%"</body></img>
<p class="desc_table">The user may also view the data in table format, by clicking the <strong>Table</strong> tab next to the 'Plot' tab. Values for all positions of the overlayed grid are displayed.</p>
</center>
<br></br>

<center><img src="images/HMI19.png" width="70%" height="70%"</body></img>
<p class="desc_table">The table is sortable, by clicking on the arrows next to the table headers. For example, to view the table in order of decreasing value, click the <strong>Value</strong> arrow twice. The points with highest intensity are now displayed.</p>
</center>
<br></br>

<center><img src="images/HMI20.png" width="70%" height="70%"</body></img>
<p class="desc_table">The user may search the table by value and/or position by entering a value in the search text boxes, either the <strong>Search</strong> box at the top of the table, or the <strong>X</strong>, <strong>Y</strong>, or <strong>Value</strong> search boxes directly below the table columns. For example, entering '45' in the 'Value' text box, will retireve all the positions with a value of '45'.</p>
</center>

<br></br><br></br>
</div>

    </body>
</html>